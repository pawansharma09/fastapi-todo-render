{% extends "base.html" %}
{% block title %}My Todos{% endblock %}
{% block content %}
<div class="todos-header">
    <h2>My Todos ({{ user.email }})</h2>
    <a href="/logout">Logout</a>
</div>

<form method="POST" style="margin-bottom: 20px;">
    <div class="form-group">
        <input type="text" name="title" placeholder="Todo title" required>
    </div>
    <div class="form-group">
        <input type="text" name="description" placeholder="Description (optional)">
    </div>
    <button type="submit">Add Todo</button>
</form>

{% if todos %}
    {% for todo in todos %}
    <div class="todo-item {% if todo.completed %}completed{% endif %}">
        <div class="todo-info">
            <h3>{{ todo.title }}</h3>
            <p>{{ todo.description or '' }}</p>
        </div>
        <div class="actions">
            <form method="POST" action="/todos/{{ todo.id }}/toggle" style="display:inline;">
                <button type="submit">{{ 'Undo' if todo.completed else 'Complete' }}</button>
            </form>
            <form method="POST" action="/todos/{{ todo.id }}/delete" style="display:inline;">
                <button type="submit" style="background:#dc3545;">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
{% else %}
    <p>No todos yet. Add one above!</p>
{% endif %}
{% endblock %}